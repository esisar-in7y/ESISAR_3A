
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>

int n=0;

void sighandler(int sig ) ;

int main(void){

	signal( SIGINT, sighandler);

	while(1){
		puts(".");
		sleep(1);
	}

	return 0;
}

void sighandler(int sig){
	n++;
	/* Bad practice, should be using write() in signal handler, or setting flags for another print function*/
	/* printf() is buffered */
	printf("\bCaught SIGINT %d time%c\n",n, (n==1)?' ':'s');
	if (n>=5) { 
		printf("exiting\n");
		exit(sig);
	}
}






